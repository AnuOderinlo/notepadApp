/*! Lazy Load 1.9.4 - MIT license - Copyright 2010-2013 Mika Tuupola */
function checkScroll(){$(document).scrollTop()>60?transparent&&(transparent=!1,navbar_transparent.removeClass("navbar-transparent").addClass("filled")):transparent||(transparent=!0,navbar_transparent.addClass("navbar-transparent").removeClass("filled"))}function autoGrow(e){e.style.height="5px",e.style.height=e.scrollHeight+"px"}!function(e,t,r,o){var a=e(t);e.fn.lazyload=function(n){function i(){var t=0;l.each((function(){var r=e(this);if(!d.skip_invisible||r.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else r.trigger("appear"),t=0}))}var s,l=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return n&&(o!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),o!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(d,n)),s=d.container===o||d.container===t?a:e(d.container),0===d.event.indexOf("scroll")&&s.bind(d.event,(function(){return i()})),this.each((function(){var t=this,r=e(t);t.loaded=!1,(r.attr("src")===o||!1===r.attr("src"))&&r.is("img")&&r.attr("src",d.placeholder),r.one("appear",(function(){if(!this.loaded){if(d.appear){var o=l.length;d.appear.call(t,o,d)}e("<img />").bind("load",(function(){var o=r.attr("data-"+d.data_attribute);r.hide(),r.is("img")?r.attr("src",o):r.css("background-image","url('"+o+"')"),r[d.effect](d.effect_speed),t.loaded=!0;var a=e.grep(l,(function(e){return!e.loaded}));if(l=e(a),d.load){var n=l.length;d.load.call(t,n,d)}})).attr("src",r.attr("data-"+d.data_attribute))}})),0!==d.event.indexOf("scroll")&&r.bind(d.event,(function(){t.loaded||r.trigger("appear")}))})),a.bind("resize",(function(){i()})),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",(function(t){t.originalEvent&&t.originalEvent.persisted&&l.each((function(){e(this).trigger("appear")}))})),e(r).ready((function(){i()})),this},e.belowthefold=function(r,n){return(n.container===o||n.container===t?(t.innerHeight?t.innerHeight:a.height())+a.scrollTop():e(n.container).offset().top+e(n.container).height())<=e(r).offset().top-n.threshold},e.rightoffold=function(r,n){return(n.container===o||n.container===t?a.width()+a.scrollLeft():e(n.container).offset().left+e(n.container).width())<=e(r).offset().left-n.threshold},e.abovethetop=function(r,n){return(n.container===o||n.container===t?a.scrollTop():e(n.container).offset().top)>=e(r).offset().top+n.threshold+e(r).height()},e.leftofbegin=function(r,n){return(n.container===o||n.container===t?a.scrollLeft():e(n.container).offset().left)>=e(r).offset().left+n.threshold+e(r).width()},e.inviewport=function(t,r){return!(e.rightoffold(t,r)||e.leftofbegin(t,r)||e.belowthefold(t,r)||e.abovethetop(t,r))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),$(document).ready((function(){if($("img.lazy").lazyload({effect:"fadeIn",failure_limit:30}),setTimeout((function(){$(".ace_print_margin").css("left","980.389px")}),100),$(document).ajaxStop((function(){$("img.lazy").lazyload({effect:"fadeIn",failure_limit:30})})),$("#buynow").click((function(e){$(".paypalFormContent form:first").submit(),e.preventDefault()})),$(".tip, .isTooltip").tooltip(),$(".tipPop").mouseover((function(){$(this).popover("show")})),$(".tipPop").mouseout((function(){$(this).popover("hide")})),$(".btn-show-search-form").click((function(e){$(".search-form").toggleClass("hidden"),e.preventDefault()})),$(".btn-download").click((function(e){"undefined"!=typeof ISLOGIN&&""!=ISLOGIN&&$("div.about-linking").removeClass("hidden")})),$(".remove-top-notify").click((function(e){$(this).closest(".notification").remove()})),$(".deleteModal").click((function(){$(".principal-container .modal-backdrop").remove(),urlDelte=$(this).attr("href");return bootbox.confirm('<div class="alert alert-danger">You really want delete this?</div>',(function(e){1==e&&(window.location.href=urlDelte)})),!1})),$(document).on("click",".load-in-modal",(function(){$("#principal-container .modal-backdrop").remove();var e=$(this).attr("href");return bootbox.alert("<div id='loadInModalContent' class='text-center'> <h2>Loading...</h2> </div>"),$.post(e,{},(function(e){$("#loadInModalContent").html(e)})),!1})),$(document).on("click",".photo-modal",(function(){$("#principal-container .modal-backdrop").remove();var e=$(this).attr("src");return bootbox.alert("<div id='loadInModalContent' class='text-center'> <img  src='"+e+"' class='img-thumbnail'/> </div>"),!1})),$("#ThemeType").change((function(){$(".Premium-field").addClass("hidden"),$(".Free-field").addClass("hidden"),$(".Premium-field input").val("").removeAttr("required"),$(".Free-field input").val("").removeAttr("required");var e=$(this).val();""==e&&(e="Free"),$("."+e+"-field").removeClass("hidden"),$("."+e+"-field input").attr("type","url"),$("."+e+"-field input").attr("required","required")})),$("#ThemeType")){$(".Premium-field").addClass("hidden"),$(".Free-field").addClass("hidden"),$(".Premium-field input").val("").removeAttr("required"),$(".Free-field input").val("").removeAttr("required");var e=$("#ThemeType").val();""==e&&(e="Free"),$("."+e+"-field").removeClass("hidden"),$("."+e+"-field input").attr("type","url"),$("."+e+"-field input").attr("required","required")}var t,r,o;$(document).on("click",".btn-add-post",(function(){if(""!=$("#post").val()&&""!=$("#post").val().trim())if("test"!=$.trim($("#post").val()).toLowerCase()){var e=$(this);$(".btn-add-post, #post").attr("readonly","readonly");var r=!1;void 0!==e.attr("data-home")&&(r=e.attr("data-home")),t||(t=$.ajax({method:"POST",url:APPBASE+"/posts/add_ajax",data:{Post:{home:r,type:"TimeLine",post:$("#post").val(),receiver_id:$("#receiverId").val()}},complete:function(e){$("#post").val(""),$(".btn-add-post, #post").removeAttr("readonly"),resp=e.responseText,0==resp?bootbox.alert("Error saving, please try later"):($("#post").removeAttr("rows"),$(".post-items").prepend(resp),$(".post-items .post-item:first").fadeOut("slow",(function(){$(".post-items .post-item:first").show()})))}}).always((function(){t=void 0})))}else bootbox.alert('<div class="alert alert-info">What are you testing?. Please update your profile.<br> Use this section to share amazing ideas and help others</div>');else bootbox.alert("Write something...")})),$(".p-txt-comment").pressEnter((function(e){var t=$(this);if(""==$(this).val())return!1;var o=$("#receiverId").val();r||(r=$.ajax({method:"POST",url:APPBASE+"/comments/add_ajax",data:{Comment:{render:!0,data_to:t.attr("data-to"),comment:t.val(),related_id:t.attr("data-related"),to:o,related_with:t.attr("data-related-with"),post_creator:t.attr("data-post-creator")}},complete:function(e){if(resp=e.responseText,0==resp)bootbox.alert("Error saving, please try later");else{var r=$(resp);$(r).insertBefore(t.closest("li")),r.fadeOut("slow",(function(){r.show()})),t.val(""),t.css("height","50px")}}}).always((function(){r=void 0}))),e.preventDefault()})),$(document).on("click",".btn-del-post",(function(e){e.preventDefault();var t=$(this).attr("data-related");if("indefined"==typeof t||""==t)return!1;var r=$(this);$.post(APPBASE+"/posts/delete_ajax/"+t,{},(function(e){!0===e||"1"===e?r.closest(".post-item").fadeOut("slow",(function(){r.closest(".post-item").remove()})):bootbox.alert("Error deleting, please try later")}))})),$(document).on("click",".btn-del-post-comment",(function(){var e=$(this).attr("data-related");if("indefined"==typeof e||""==e)return!1;var t=$(this);$.post(APPBASE+"/comments/delete_ajax/"+e,{},(function(e){!0===e||"1"===e?t.closest("li").fadeOut("slow",(function(){t.closest("li").remove()})):bootbox.alert("Error deleting, please try later")}))})),$(document).on("submit","#MessageAddAjaxForm",(function(){var e=$(this);return $.ajax({method:"POST",url:APPBASE+"/messages/add_ajax",data:e.serializeArray(),complete:function(e){response=e.responseText,bootbox.hideAll(),"1"==response||1==response?bootbox.alert("<div class='alert alert-success'>The message has been sent</div>"):bootbox.alert("<div class='alert alert-danger'>Error when sending message, please try later</div>")}}),!1})),$(document).on("submit","#MessageMessagesForm",(function(){var e=$(this);if(""==$("#MessageMessage").val())return!1;var t=$("#MessageMessage").val();return o||(o=$.ajax({method:"POST",url:APPBASE+"/messages/add_ajax",data:e.serializeArray(),complete:function(e){if($("#MessageMessage").val(""),response=e.responseText,bootbox.hideAll(),"1"==response||1==response){var r='                        <div class="media msg">                        <a class="pull-left" href="#">                            <img class="lazy media-object img-circle" style="width: 32px; height: 32px;" src="'+$("#MessageMeImage").val()+'">                        </a>                        <div class="media-body">                            <small class="pull-right time"><i class="fa fa-clock-o"></i>Just now</small>                            <h5 class="media-heading">'+$("#MessageMeName").val()+'</h5>                            <small class="col-md-10 text-muted">'+t+"</small>                        </div>                    </div>";$(".msg-wrap").append(r)}else bootbox.alert("<div class='alert alert-danger'>Error when sending message, please try later</div>")}}).always((function(){o=void 0}))),!1})),CURRENT_MSG_PAGE=2,$(document).on("click",".load-prev-msg",(function(){var e=$(this);return requestLoadPrevMsg=$.ajax({method:"POST",url:e.attr("href"),complete:function(t){if(404==t.status||"404"==t.status)return bootbox.alert("There are no more messages to load"),!1;var r=CURRENT_MSG_PAGE+1;$(".load-prev-msg").attr("href",e.attr("href").replace("page:"+CURRENT_MSG_PAGE,"page:"+r)),CURRENT_MSG_PAGE=r,$(".msg-wrap").prepend(t.responseText)}}).always((function(){requestLoadPrevMsg=void 0})),!1})),CURRENT_USERS_PAGE=2,$(document).on("click",".load-more-users",(function(){var e=$(this);return $.ajax({method:"POST",url:e.attr("href"),complete:function(t){if(404==t.status||"404"==t.status)return bootbox.alert("There are no more conversations to load"),!1;var r=CURRENT_USERS_PAGE+1;$(".load-more-users").attr("href",e.attr("href").replace("page:"+CURRENT_USERS_PAGE,"page:"+r)),CURRENT_USERS_PAGE=r,$(".content-users-msg").prepend(t.responseText)}}).always((function(){void 0})),!1})),$(".auto-grow").keyup((function(){autoGrow(this)}));var a=$("#post-items");$.isFunction($.infinitescroll)&&a.infinitescroll({navSelector:".next",nextSelector:".next a",itemSelector:".post-item",debug:!1,dataType:"html",loading:{finishedMsg:"",img:APPBASE+"/img/spinner.gif"}})})),transparent=!0,$(document).ready((function(){navbar_transparent=$(".navbar-fixed-top.navbar-transparent"),responsive=$(window).width(),checkScroll(),$(window).on("scroll",(function(){checkScroll(),responsive}))})),$.fn.pressEnter=function(e){return this.each((function(){$(this).bind("enterPress",e),$(this).keyup((function(e){13==e.keyCode&&$(this).trigger("enterPress")}))}))},jQuery.cookie=function(e,t,r){if(void 0===t){var o=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var i=jQuery.trim(a[n]);if(i.substring(0,e.length+1)==e+"="){o=decodeURIComponent(i.substring(e.length+1));break}}return o}r=r||{},null===t&&(t="",r.expires=-1);var s,l="";r.expires&&("number"==typeof r.expires||r.expires.toUTCString)&&("number"==typeof r.expires?(s=new Date).setTime(s.getTime()+24*r.expires*60*60*1e3):s=r.expires,l="; expires="+s.toUTCString());var d=r.path?"; path="+r.path:"",c=r.domain?"; domain="+r.domain:"",f=r.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),l,d,c,f].join("")};